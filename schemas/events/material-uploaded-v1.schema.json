{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/EduGoGroup/edugo-infrastructure/schemas/events/material-uploaded-v1",
  "title": "Material Uploaded Event",
  "description": "Evento publicado cuando un docente sube un material educativo",
  "type": "object",
  "required": ["event_id", "event_type", "event_version", "timestamp", "payload"],
  "properties": {
    "event_id": {
      "type": "string",
      "format": "uuid",
      "description": "ID único del evento (UUID v7)"
    },
    "event_type": {
      "type": "string",
      "const": "material.uploaded",
      "description": "Tipo de evento"
    },
    "event_version": {
      "type": "string",
      "const": "1.0",
      "description": "Versión del schema"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp ISO 8601 del evento"
    },
    "payload": {
      "type": "object",
      "required": ["material_id", "school_id", "teacher_id", "file_url", "file_size_bytes", "file_type"],
      "properties": {
        "material_id": {
          "type": "string",
          "format": "uuid",
          "description": "ID del material en PostgreSQL"
        },
        "school_id": {
          "type": "string",
          "format": "uuid",
          "description": "ID de la escuela"
        },
        "teacher_id": {
          "type": "string",
          "format": "uuid",
          "description": "ID del docente que subió el material"
        },
        "file_url": {
          "type": "string",
          "format": "uri",
          "description": "URL del archivo (S3 o storage)"
        },
        "file_size_bytes": {
          "type": "integer",
          "minimum": 0,
          "description": "Tamaño del archivo en bytes"
        },
        "file_type": {
          "type": "string",
          "description": "MIME type del archivo (ej: application/pdf)"
        },
        "metadata": {
          "type": "object",
          "description": "Metadata adicional del material",
          "properties": {
            "title": {
              "type": "string",
              "description": "Título del material"
            },
            "description": {
              "type": "string",
              "description": "Descripción del material"
            },
            "subject": {
              "type": "string",
              "description": "Materia (ej: Matemáticas, Física)"
            },
            "grade": {
              "type": "string",
              "description": "Grado/Nivel (ej: 10th, Secundaria)"
            }
          }
        }
      }
    }
  },
  "additionalProperties": false
}
